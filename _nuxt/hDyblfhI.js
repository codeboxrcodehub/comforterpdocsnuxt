import{f,N as C,M as A,ad as c,k as v,o as p,w as m,r as _,l as r,S,D as L,ar as w,as as x,at as z,au as q,$ as R,aj as E,a9 as I,aa as $,n as B,m as P,V as j,am as k}from"#entry";const[b,M]=A("AvatarRoot");var O=f({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return C(),M({imageLoadingStatus:c("idle")}),(e,s)=>(p(),v(r(S),{"as-child":e.asChild,as:e.as},{default:m(()=>[_(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),D=O;function y(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function F(t,{referrerPolicy:e,crossOrigin:s}={}){const o=c(!1),n=c(null),i=L(()=>o.value?(!n.value&&w&&(n.value=new window.Image),n.value):null),u=c(y(i.value,t.value)),d=l=>()=>{o.value&&(u.value=l)};return x(()=>{o.value=!0,z(l=>{const a=i.value;if(!a)return;u.value=y(a,t.value);const g=d("loaded"),h=d("error");a.addEventListener("load",g),a.addEventListener("error",h),e?.value&&(a.referrerPolicy=e.value),typeof s?.value=="string"&&(a.crossOrigin=s.value),l(()=>{a.removeEventListener("load",g),a.removeEventListener("error",h)})})}),q(()=>{o.value=!1}),u}var N=f({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(t,{emit:e}){const s=t,o=e,{src:n,referrerPolicy:i,crossOrigin:u}=R(s);C();const d=b(),l=F(n,{referrerPolicy:i,crossOrigin:u});return E(l,a=>{o("loadingStatusChange",a),a!=="idle"&&(d.imageLoadingStatus.value=a)},{immediate:!0}),(a,g)=>I((p(),v(r(S),{role:"img","as-child":a.asChild,as:a.as,src:r(n),"referrer-policy":r(i)},{default:m(()=>[_(a.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[$,r(l)==="loaded"]])}}),U=N;const H=f({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(t){const e=t;return(s,o)=>(p(),v(r(D),{class:B(r(P)(r(W)({size:s.size,shape:s.shape}),e.class))},{default:m(()=>[_(s.$slots,"default")]),_:3},8,["class"]))}}),J=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(t){const e=t;return(s,o)=>(p(),v(r(U),j(e,{class:"size-full object-cover"}),{default:m(()=>[_(s.$slots,"default")]),_:3},16))}}),W=k("bg-secondary text-foreground inline-flex shrink-0 select-none items-center justify-center overflow-hidden font-normal",{variants:{size:{sm:"size-10 text-xs",base:"size-16 text-2xl",lg:"size-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}});export{H as _,J as a};
